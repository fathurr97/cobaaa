'use strict';importScripts('https://cdnjs.cloudflare.com/ajax/libs/localforage/1.7.1/localforage.min.js');var staicCacheName='breathe-static-v9';self.addEventListener('install',function(a){a.waitUntil(caches.open(staicCacheName).then(function(a){return a.addAll(['/','/resources/css/styles.css','/resources/images/Breathe Logo With Text.png','/resources/images/input-close.svg','/resources/js/app.js','/resources/js/utils.js','https://unpkg.com/axios/dist/axios.min.js','https://cdn.rawgit.com/bjornharrtell/jsts/gh-pages/1.0.2/jsts.min.js','https://fonts.gstatic.com/s/poppins/v5/pxiByp8kv8JHgFVrLDz8Z1xlFQ.woff2','https://fonts.gstatic.com/s/poppins/v5/pxiEyp8kv8JHgFVrJJfecg.woff2','https://fonts.gstatic.com/s/poppins/v5/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2','https://fonts.gstatic.com/s/materialicons/v36/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2'])}))}),self.addEventListener('activate',function(a){a.waitUntil(caches.keys().then(function(a){return Promise.all(a.filter(function(a){return a.startsWith('breathe-static')&&a!==staicCacheName}).map(function(a){return caches.delete(a)}))}))}),self.addEventListener('fetch',function(a){a.respondWith(caches.match(a.request).then(function(b){return b?b:fetch(a.request)}).catch(function(){if(a.request.url.startsWith('https://api.waqi.info/feed/geo')){var b=new URL(a.request.url),c=b.searchParams.get('key');return localforage.getItem(c).then(function(b){return b?new Response(JSON.stringify(b.apiData)):fetch(a.request)}).catch(function(a){console.log(a)})}if(a.request.url.startsWith('https://maps.googleapis.com/maps/api')){if(!a.clientId)return;clients.get(a.clientId).then(function(a){a.postMessage({message:'mapsoffline'})}).catch(function(a){console.log(a)})}else if(a.request.url.startsWith('https://geoip.nekudo.com/api/')){if(!a.clientId)return;clients.get(a.clientId).then(function(a){a.postMessage({message:'ipoffline'})}).catch(function(a){console.log(a)})}}))}),self.addEventListener('message',function(a){'skipWaiting'===a.data.action&&self.skipWaiting()});